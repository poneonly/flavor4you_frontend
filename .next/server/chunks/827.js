"use strict";exports.id=827,exports.ids=[827],exports.modules={25208:(a,b,c)=>{c.d(b,{A:()=>D});var d=c(57631),e=c(15610),f=c(7791),g=c(52704),h=c(65639),i=c(48204);function j({kind:a="primary",children:b,sx:c,size:e="large",...f}){let g="primary"===a;return(0,d.jsx)(i.A,{variant:g?"contained":"outlined",color:"inherit",size:e,sx:{textTransform:"none",...g?{backgroundColor:"var(--color-primary)",color:"#fff",border:"1px solid var(--color-primary)","&:hover":{backgroundColor:"var(--color-primary)",opacity:.9,border:"1px solid var(--color-primary)"}}:{backgroundColor:"#fff",color:"var(--color-primary)",border:"1px solid var(--color-primary)","&:hover":{backgroundColor:"#fff",border:"1px solid var(--color-primary)",opacity:.9}},...c},...f,children:b})}var k=c(76717),l=c(28857),m=c(21551),n=c(71858),o=c(42260),p=c(43643);let q=(0,o.Z)();function r({value:a,onChange:b,errors:c}){let{title:f,description:g,categories:i}=a,[j,k]=e.useState([]);e.useEffect(()=>{fetch("/categories.json").then(a=>a.json()).then(a=>{k(a.map(a=>a.name))}).catch(console.error)},[]);let o=async c=>{let d=c.filter(a=>!j.some(b=>b.toLowerCase()===a.toLowerCase()));if(d.length){for(let a of d)await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});let a=await fetch("/api/categories");k((await a.json()).map(a=>a.name))}b({...a,categories:c})};return(0,d.jsxs)(l.A,{variant:"outlined",sx:{p:3},children:[(0,d.jsx)(m.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Basic Information"}),(0,d.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,d.jsx)(n.A,{fullWidth:!0,label:"Recipe Name",value:f,onChange:c=>b({...a,title:c.target.value}),error:!!c?.title,helperText:c?.title}),(0,d.jsx)(n.A,{fullWidth:!0,label:"Description",multiline:!0,rows:2,value:g,onChange:c=>b({...a,description:c.target.value}),error:!!c?.description,helperText:c?.description}),(0,d.jsx)(p.A,{multiple:!0,freeSolo:!0,options:j,value:i,filterOptions:(a,b)=>{let c=q(a,b),{inputValue:d}=b;return""===d||a.some(a=>a.toLowerCase()===d.toLowerCase())||c.push(d),c},onChange:(a,b)=>o(b),renderInput:a=>(0,d.jsx)(n.A,{...a,label:"Categories",error:!!c?.categories,helperText:c?.categories})})]})]})}function s({value:a,onChange:b}){let c=e.useRef(null),[f,g]=e.useState(!1),i=async a=>{if(!a.target.files?.length)return;let c=a.target.files[0],d=new FormData;d.append("file",c),g(!0);try{let a=await fetch("/api/upload",{method:"POST",body:d}),c=await a.json();b(c.url)}catch(a){console.error(a)}finally{g(!1)}};return(0,d.jsxs)(l.A,{variant:"outlined",sx:{p:3},children:[(0,d.jsx)(m.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Upload Recipe Image"}),(0,d.jsxs)(h.A,{sx:{border:"2px dashed #ccc",borderRadius:2,height:180,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},onClick:()=>c.current?.click(),children:[(0,d.jsx)(j,{kind:"secondary",children:f?"Uploading...":"Upload Image"}),(0,d.jsx)("input",{type:"file",hidden:!0,ref:c,onChange:i,accept:"image/*"})]}),a&&(0,d.jsxs)(h.A,{sx:{mt:2},children:[(0,d.jsx)(m.A,{variant:"body2",color:"text.secondary",children:"Current image:"}),(0,d.jsx)(h.A,{component:"img",src:a,alt:"recipe",sx:{mt:1,width:"100%",maxHeight:220,objectFit:"cover",borderRadius:1}})]})]})}var t=c(83794);function u({value:a,onChange:b,showErrors:c,errorText:f}){let[i,k]=e.useState(""),[o,p]=e.useState("");return(0,d.jsxs)(l.A,{variant:"outlined",sx:{p:3},children:[(0,d.jsx)(m.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Ingredients"}),(0,d.jsxs)(g.A,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[(0,d.jsx)(n.A,{label:"Ingredient name",fullWidth:!0,value:i,onChange:a=>k(a.target.value)}),(0,d.jsx)(n.A,{label:"Quantity (e.g., 2 cups)",fullWidth:!0,value:o,onChange:a=>p(a.target.value)}),(0,d.jsx)(j,{kind:"primary",onClick:()=>{i.trim()&&o.trim()&&(b([...a,{ingredientName:i.trim(),quantity:o.trim()}]),k(""),p(""))},type:"button",children:"Add"})]}),c&&!!f&&(0,d.jsx)(m.A,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:f}),(0,d.jsx)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:2},children:a.map((c,e)=>(0,d.jsx)(t.A,{label:`${c.quantity} ${c.ingredientName}`,onDelete:()=>(c=>{let d=[...a];d.splice(c,1),b(d)})(e)},`${c.ingredientName}-${c.quantity}-${e}`))})]})}var v=c(80214),w=c(16865);function x({value:a,onChange:b,showErrors:c}){let[f,i]=e.useState(a.length?a:[""]);e.useEffect(()=>{i(a.length?a:[""])},[a]);let k=a=>{i(a),b(a)};return(0,d.jsxs)(l.A,{variant:"outlined",sx:{p:3},children:[(0,d.jsx)(m.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Directions"}),(0,d.jsx)(g.A,{spacing:2,children:f.map((a,b)=>{let e=!!c&&""===a.trim();return(0,d.jsxs)(h.A,{sx:{p:1,borderRadius:1,border:"1px solid",borderColor:"divider"},children:[(0,d.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,d.jsxs)(m.A,{fontWeight:"bold",children:["Step ",b+1]}),b>0&&(0,d.jsx)(v.A,{"aria-label":"remove step",size:"small",onClick:()=>{var a;0!==(a=b)&&k(f.filter((b,c)=>c!==a))},sx:{ml:"auto"},children:(0,d.jsx)(w.A,{size:16})})]}),(0,d.jsx)(n.A,{fullWidth:!0,multiline:!0,rows:3,placeholder:"Describe step...",value:a,onChange:a=>{var c;return c=a.target.value,void k(f.map((a,d)=>d===b?c:a))},error:e,helperText:e?"This step cannot be empty.":void 0})]},b)})}),(0,d.jsx)(h.A,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,d.jsx)(j,{kind:"primary",onClick:()=>k([...f,""]),children:"Add Step"})})]})}var y=c(52678),z=c(92583),A=c(62562),B=c(85814);function C({value:a,onChange:b,errors:c}){let{cookTime:e,servings:f,difficulty:g}=a;return(0,d.jsxs)(l.A,{variant:"outlined",sx:{p:3},children:[(0,d.jsx)(m.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Recipe Details"}),(0,d.jsxs)(h.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,d.jsx)(n.A,{label:"Cook Time (minutes)",type:"number",sx:{flex:1,minWidth:200},value:e,onChange:c=>b({...a,cookTime:c.target.value}),error:!!c?.cookTime,helperText:c?.cookTime,inputProps:{min:0}}),(0,d.jsx)(n.A,{label:"Servings (people)",type:"number",sx:{flex:1,minWidth:200},value:f,onChange:c=>b({...a,servings:c.target.value}),error:!!c?.servings,helperText:c?.servings,inputProps:{min:1}}),(0,d.jsxs)(y.A,{sx:{flex:1,minWidth:200},error:!!c?.difficulty,children:[(0,d.jsx)(z.A,{id:"difficulty-label",children:"Difficulty Level"}),(0,d.jsxs)(A.A,{labelId:"difficulty-label",label:"Difficulty Level",value:g,onChange:c=>b({...a,difficulty:c.target.value}),children:[(0,d.jsx)(B.A,{value:"easy",children:"Easy"}),(0,d.jsx)(B.A,{value:"medium",children:"Medium"}),(0,d.jsx)(B.A,{value:"hard",children:"Hard"})]})]}),c?.difficulty&&(0,d.jsx)(m.A,{variant:"caption",color:"error",sx:{ml:1,mt:.5,width:"100%"},children:c.difficulty})]})]})}function D({recipe:a}){let b=(0,k.useRouter)(),[c,i]=e.useState({title:"",description:"",categories:[]}),[l,m]=e.useState([]),[n,o]=e.useState([]),[p,q]=e.useState({cookTime:"",servings:"",difficulty:""}),[t,v]=e.useState(""),[w,y]=e.useState({}),[z,A]=e.useState(!1),B=async()=>{if(A(!0),!(()=>{let a={};return c.title||((a.basic??={}).title="Required"),c.description||((a.basic??={}).description="Required"),c.categories.length||((a.basic??={}).categories="Required"),l.length||(a.ingredients="At least one ingredient required"),n.length||(a.steps="At least one step required"),p.cookTime||((a.details??={}).cookTime="Required"),p.servings||((a.details??={}).servings="Required"),p.difficulty||((a.details??={}).difficulty="Required"),t||(a.image="Image required"),y(a),0===Object.keys(a).length})())return;let a={title:c.title.trim(),description:c.description.trim(),categories:c.categories,cookingTime:Number(p.cookTime),servings:Number(p.servings),difficulty:p.difficulty,recipeImages:t,ingredients:l,steps:n};try{let c=await fetch("/api/recipes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),d=await c.json();c.ok&&d?.id?b.push(`/recipes/${d.id}`):alert("Save failed: "+JSON.stringify(d))}catch(a){console.error(a)}};return(0,d.jsxs)(f.A,{maxWidth:"md",sx:{py:6},children:[(0,d.jsxs)(g.A,{spacing:4,children:[(0,d.jsx)(r,{value:c,onChange:i,errors:w.basic}),(0,d.jsx)(s,{value:t,onChange:v}),(0,d.jsx)(u,{value:l,onChange:m,showErrors:z,errorText:w.ingredients}),(0,d.jsx)(x,{value:n,onChange:o,showErrors:z}),(0,d.jsx)(C,{value:p,onChange:q,errors:w.details})]}),(0,d.jsx)(h.A,{sx:{mt:5,display:"flex",justifyContent:"center",gap:3},children:(0,d.jsx)(j,{kind:"primary",onClick:B,children:"Publish Recipe"})})]})}}};